<!DOCTYPE html>
<html>
<head>
<title>Roj Bachat - Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f4f6ff;padding:20px;}
.card{background:white;padding:15px;margin-top:15px;border-radius:15px;box-shadow:0 4px 10px rgba(0,0,0,0.08);}
.menu a{display:block;background:#4c6ef5;color:white;text-align:center;padding:14px;margin-top:10px;border-radius:10px;text-decoration:none;font-size:18px;}
</style>

</head>
<body>

<h2>Welcome to Roj Bachat</h2>

<div class="card">
    <h3>Your Daily Saving: ₹<span id="dailyAmt">0</span></h3>
    <h3>Wallet Balance: ₹<span id="bal">0</span></h3>
</div>

<div class="menu">
    <a href="daily-saving.html">Daily Saving Setup</a>
    <a href="pay.html">Daily Payment</a>
    <a href="add-money.html">Add Money</a>
    <a href="withdraw.html">Withdraw</a>
    <a href="history.html">History</a>
    <a href="group.html">Groups</a>
    <a href="profile.html">Profile</a>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyC98Lxjn6jn-V9NQjcOGluL04EAX4kzpmY",
  authDomain: "rojbachat-7e5a8.firebaseapp.com",
  projectId: "rojbachat-7e5a8",
  storageBucket: "rojbachat-7e5a8.firebasestorage.app",
  messagingSenderId: "790739371754",
  appId: "1:790739371754:web:9b0bd71f2579d664747993"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

auth.onAuthStateChanged(async user=>{
    if(!user){ window.location="login.html"; return; }

    let data = await db.collection("users").doc(user.uid).get();

    document.getElementById("dailyAmt").innerText = data.data().dailySaving;
    document.getElementById("bal").innerText = data.data().balance;
});
</script>

</body>
</html>
