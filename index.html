<!DOCTYPE html>
<html>
<head>
<title>Roj Bachat - Daily Saving</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f2f2f2;margin:0;padding:0;}
.header{background:#007bff;padding:18px;color:white;font-size:22px;text-align:center;}
.card{background:white;padding:20px;border-radius:12px;box-shadow:0 2px 6px #0003;margin:20px;}
input,button{width:100%;padding:14px;margin-top:10px;border-radius:10px;border:1px solid #ccc;font-size:16px;}
button{background:#007bff;color:white;border:none;font-size:18px;}
button:hover{opacity:0.9;}
.fixed-btn{
    position: fixed; bottom:20px; right:20px;
    background:#007bff;color:white;padding:14px 20px;border-radius:50px;
    font-size:18px;text-decoration:none;
}
.logout{
    position:fixed; top:10px; right:10px;
    background:red;color:white;padding:10px 15px;border-radius:8px;text-decoration:none;
}
</style>
</head>
<body>

<div class="header">Roj Bachat</div>

<a class="logout" href="#" onclick="logout()">Logout</a>

<div class="card">
    <h3>User Details</h3>
    <p id="userEmail">Loading...</p>
</div>

<div class="card">
    <h3>Daily Saving Setup</h3>

    <label>Daily Saving Amount (‚Çπ)</label>
    <input type="number" id="amount" placeholder="Enter amount">

    <label>Your UPI ID</label>
    <input type="text" id="upi" placeholder="example@upi">

    <button onclick="startSaving()">Start Daily Auto Debit</button>
</div>

<a href="wallet.html" class="fixed-btn">Wallet</a>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
// üî• Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyC98Lxjn6jn-V9NqjcOGluL04EAX4kzpmY",
  authDomain: "rojbachat-7e5a8.firebaseapp.com",
  projectId: "rojbachat-7e5a8",
  storageBucket: "rojbachat-7e5a8.firebasestorage.app",
  messagingSenderId: "790739371754",
  appId: "1:790739371754:web:9b0bd71f2579d664747993"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// USER INFO
auth.onAuthStateChanged(user=>{
    if(!user){
        window.location.href="login.html";
    } else {
        document.getElementById("userEmail").innerText = user.email;
    }
});

// LOGOUT
function logout(){
    auth.signOut().then(()=> window.location.href="login.html");
}


// DAILY AUTOPAY
function startSaving(){
    let amount = document.getElementById("amount").value;
    let upi = document.getElementById("upi").value;

    if(amount=="" || upi==""){
        alert("Please fill all details");
        return;
    }

    // üî• ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ Cashfree Hosted Autopay Link ‡§≤‡§ó‡§æ‡§®‡§æ ‡§π‡•à
    let hostedLink = "https://payments.cashfree.com/autoPay/YOUR_LINK_HERE";

    window.location.href = hostedLink + "?amount=" + amount + "&upi_id=" + upi;
}
</script>

</body>
    </html>
